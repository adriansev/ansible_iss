---
- hosts: "{{ target | default('all') }}"
  tasks:

  - name: Update smartctl db from master
    ansible.builtin.command: /usr/sbin/update-smart-drivedb -u github --trunk --no-verify

  - name: Get facts
    ansible.builtin.setup:
      gather_subset:
      - 'all'
      - '!facter'
      - '!ohai'


  - name: Gather extended facts
    deltabg.extended_facts.extended_facts:
      gather_subset:
      - '!Icinga2FactCollector'
      - '!DockerFactCollector'

  # Print extended facts
  #- name: Debug
  #  debug:
  #    var: ansible_facts

